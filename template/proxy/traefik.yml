traefik:
  image: traefik
  command: --web \
    --docker \
    --docker.swarmmode \
    --docker.domain=${DOMAIN} \
    --docker.watch \
    --logLevel=DEBUG\
    --web.metrics.prometheus \
    --web.address=:8088
  networks:
    - traefik-net
  ports:
    - "8088:8088"
    - "80:80"
  volumes:
    - /var/run/docker.sock:/var/run/docker.sock
    - /dev/null:/traefik.toml
  depends_on:
    - consul-leader
